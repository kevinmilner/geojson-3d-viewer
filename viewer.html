<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>3D GeoJSON Viewer (CesiumJS)</title>

	<!-- CesiumJS via cdnjs (pin a version for stability) -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.133.1/Widgets/widgets.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/cesium/1.133.1/Cesium.js"></script>

	<style>
		html, body, #cesiumContainer { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; }
		#ui {
			position: absolute;
			top: 10px;
			left: 10px;
			z-index: 10;
			background: rgba(20, 20, 20, 0.75);
			color: #fff;
			padding: 10px 12px;
			border-radius: 10px;
			font: 13px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
			max-width: min(520px, calc(100vw - 40px));
		}
		#ui label { display: inline-block; margin-right: 8px; }
		#ui .row { display: flex; flex-wrap: wrap; gap: 10px 14px; align-items: center; margin: 8px 0; }
		#ui input[type="text"] { width: min(360px, calc(100vw - 170px)); }
		#ui input[type="number"] { width: 80px; }
		#ui input, #ui select, #ui button {
			font: inherit;
		}
		#ui button { cursor: pointer; }
		#status { margin-top: 8px; opacity: 0.9; }
		#hint { margin-top: 6px; opacity: 0.75; }
		.small { font-size: 12px; opacity: 0.85; }
		hr { border: 0; border-top: 1px solid rgba(255,255,255,0.2); margin: 10px 0; }
	</style>
</head>
<body>
	<div id="cesiumContainer"></div>

	<div id="ui">
		<div class="row">
			<label for="dataUrl"><b>GeoJSON URL</b></label>
			<input id="dataUrl" type="text" placeholder="https://…/file.geojson (or relative path)" />
			<button id="loadBtn">Load</button>
			<button id="browseBtn">Browse…</button>
			<button id="resetViewBtn">Reset view</button>
			<input id="fileInput" type="file" accept=".geojson,.json,application/geo+json,application/json" style="display:none" />
		</div>

		<div class="row">
			<label for="zMode">Z convention</label>
			<select id="zMode">
				<option value="depth_km">DEPTH_KM (default)</option>
				<option value="depth_m">DEPTH_M</option>
				<option value="elevation_m">ELEVATION_M</option>
			</select>

			<label for="viewMode">View</label>
			<select id="viewMode">
				<option value="space">Space (no globe)</option>
				<option value="translucent">Translucent globe</option>
			</select>

			<label for="gridDeg">Grid °</label>
			<input id="gridDeg" type="number" step="0.25" min="0" value="1" />
			<label><input id="gridEnable" type="checkbox" checked /> enabled</label>
		</div>

		<div class="row">
			<label for="globeAlpha">Globe alpha</label>
			<input id="globeAlpha" type="range" min="0" max="1" step="0.02" value="0.18" />
			<span class="small" id="globeAlphaVal">0.18</span>

			<label><input id="flyTo" type="checkbox" checked /> fly to data</label>
			<button id="copyLinkBtn">Copy link</button>
		</div>

		<hr />

		<div class="small">
			<b>Tips</b>: if you load from another domain, the GeoJSON host must allow CORS. If your data is all
			“depth below surface”, keep <i>Z convention</i> at DEPTH_KM and this viewer will map it to negative heights.
		</div>

		<div id="status"></div>
		<div id="hint" class="small"></div>
	</div>

	<script src="viewer.js" defer></script>
</body>
</html>
